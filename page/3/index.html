<!DOCTYPE html>
<html lang="zh-CN">
<head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
    <title>
        
            LEARN
        
    </title>
    <link rel="icon" href="/img/favicon.png"/>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="stylesheet" href="/css/gitment.css">
    <link rel="stylesheet" href="/css/hljs.min.css">
    <script src="/js/hljs.min.js"></script>  
    <script src="/js/gitment.browser.js"></script>  
</head>
<body>
    <header class="header" id="header">
    <h1>
        <a class="title" href="/">
            LEARN
        </a>
    </h1>
    <h2>
        <a class="motto">
            Learn More Think More
        </a>
    </h2>
    <nav class="navbar">
        <ul class="menu">
            
            
                <li class="menu-item">
                    <a href="/" class="menu-item-link">
                        Home
                    </a>
                </li>
            
                
            
                <li class="menu-item">
                    <a href="/archives/" class="menu-item-link">
                        Archives
                    </a>
                </li>
            
                
            
                <li class="menu-item">
                    <a href="/about/" class="menu-item-link">
                        About
                    </a>
                </li>
            
                
            
                <li class="menu-item">
                    <a href="https://github.com/superDJM/" class="menu-item-link">
                        Github
                    </a>
                </li>
            
                
            
                <li class="menu-item">
                    <a href="/atom.xml" class="menu-item-link">
                        RSS
                    </a>
                </li>
            
                
            
                
                
                <li class="menu-item">
                    <a class="menu-item-link search">
                        Search                   
                        <i class="fa fa-long-arrow-right search-icon" aria-hidden="true"></i>
                    </a>
                        <input placeholder="Search..." class="search-input" style="display:none;border:none!important;" onkeydown="onEnter(event)" onkeypress="onEnter(event)"></input>
                </li>
                
        </ul>
    </nav>
</header>
    <main class="main">
        <section class="posts">
    
        <article class="post">
            <h1>
                <a class="title" href="/2016/04/06/stack-e4-b8-8eheap-e7-9a-84-e5-8c-ba-e5-88-ab/"> 
                    stack与heap的区别 
                </a>
            </h1>
                        <div class="meta">
                <a class="date"> 
                    <i class="fa fa-calendar" aria-hidden="true"></i>                    
                    2016-04-06   
                </a>
                
                <a class="category">
                    <i class="fa fa-th" aria-hidden="true"></i>  
                </a>
               
                <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/c-c/">c/c++</a></li></ul>
                
                    
            </div>
            <div class="content">
                
                <p>在腾讯的笔试题遇到了这个问题，当时就只知道数据结构中的堆和栈。。</p>
<p>part1 预备知识</p>
<blockquote>
<p>一个由C/C++编译的程序占用的内存分为以下几个部分</p>
<p>1、栈区（stack）— 由编译器自动分配释放 ，存放函数的参数值，局部变量的值等。其操作方式类似于数据结构中的栈。</p>
<p>2、堆区（heap） — 一般由程序员分配释放， 若程序员不释放，程序结束时可能由OS回收 。注意它与数据结构中的堆是两回事，分配方式是采取链表形式分配。</p>
<p>3、全局区（静态区）（static）—，全局变量和静态变量的存储是放在一块的，初始化的全局变量和静态变量在一块区域， 未初始化的全局变量和未初始化的静态变量在相邻的另一块区域。 - 程序结束后由系统释放</p>
<p>4、文字常量区 —常量字符串就是放在这里的。 程序结束后由系统释放</p>
<p>5、程序代码区—存放函数体的二进制代码。<br>part2 代码介绍</p>
</blockquote>
<pre><code>//stack &amp;amp; heap
int a = 0;//存放在全局变量区
void sampleStackAndHeap(){
    static int b;   //存放在静态变量区
    char str[] = &quot;1234&quot;; //str存在stack中，为指针常量，“1234”是字符串常量，所以存放在文字常量区。
    char *str = (char*)malloc(1);  //str存放在stack中，malloc申请的1字节内存在heap分配。
    Derived Obj ＝ new Derived();  //new 的对象内存在heap中分配。obj还是在stack中。
}
</code></pre><p>part3 他们的结构</p>
<p>1、stack是由系统预定义的。是一块连续的内存。不能扩展，由系统自动申请和销毁。地址是从高位到低位递减。若栈满，则overflow。</p>
<p>2、heap是由程序员自己申请与释放的，用链表管理，是不连续的内存空间，容量由系统的虚拟内存决定。地址由低位向高位分配。</p>
<p>part4 存放的内容。</p>
<p>stack：</p>
<p>进入主函数之后，先把第一个可以执行的语句入栈。然后是函数的参数（一般编译器是从右到左入栈），最后是局部变量。执行完毕顺序出栈。</p>
<p>heap：</p>
<p>一般是在堆的头部用一个字节存放堆的大小。堆中的具体内容有程序员安排。</p>

                
            </div>
            <div class="continue">
            <a href="/2016/04/06/stack-e4-b8-8eheap-e7-9a-84-e5-8c-ba-e5-88-ab/">
            继续阅读            <i class="fa fa-angle-right" aria-hidden="true"></i>
            </a>
            </div>
        </article>
        
        <article class="post">
            <h1>
                <a class="title" href="/2016/04/02/e6-88-91-e7-9a-84php-mvc-e4-b9-8b-e8-b7-af-e7-b3-bb-e5-88-97-e4-ba-8c-e9-85-8d-e7-bd-ae-e5-8a-a0-e8-bd-bd-e7-b1-bb/"> 
                    我的php mvc之路系列(二) 配置加载类 
                </a>
            </h1>
                        <div class="meta">
                <a class="date"> 
                    <i class="fa fa-calendar" aria-hidden="true"></i>                    
                    2016-04-02   
                </a>
                
                <a class="category">
                    <i class="fa fa-th" aria-hidden="true"></i>  
                </a>
               
                <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/mvc框架/">mvc框架</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/mvc框架/php/">php</a></li></ul></li></ul>
                
                    
            </div>
            <div class="content">
                
                <p>今天要分享的是配置加载类。实现多级目录的数组形式的配置获取.</p>
<pre><code>&amp;lt;?php
$config = new Config(__DIR__);
var_dump($config[&#39;key&#39;]);`&lt;/pre&gt;
为什么我们能用$config[&#39;&#39;key]？？对象的数组访问？？

没错。因为我们实现了[ArrayAccess接口](http://php.net/manual/en/class.arrayaccess.php)。
&lt;pre class=&quot;pure-highlightjs&quot;&gt;`ArrayAccess {
     abstract public   offsetExists ( mixed $offset )//isset($object[&#39;name&#39;])时候调用
     abstract public   offsetGet ( mixed $offset )//var_dump($object[&#39;name&#39;])时候调用
     abstract public   offsetSet ( mixed $offset , mixed $value )//$object[&#39;name&#39;]=&#39;shiki&#39;时候调用
     abstract public   offsetUnset ( mixed $offset )//unset($object[&#39;name&#39;])时候调用
}`&lt;/pre&gt;
当运行到$config[&quot;key&quot;]的时候会自动访问offsetGet，然后直接在这个方法里面处理逻辑（**例如require你的配置文件，注意这里我们实现了延时加载配置文件。**）就可以了。

那么我们要require的配置文件究竟长什么样？
&lt;pre class=&quot;pure-highlightjs&quot;&gt;`&amp;lt;?php
$config = Array(
    &#39;router&#39; =&amp;gt; Array(
        &#39;Home\\&#39; =&amp;gt; &#39;djm&#39;
    ),
    &#39;database&#39;=&amp;gt;Array(
        &#39;type&#39;=&amp;gt;&#39;mysqli&#39;,
        &#39;host&#39;=&amp;gt;&#39;localhost&#39;,
        &#39;username&#39;=&amp;gt;&#39;root&#39;,
        &#39;password&#39;=&amp;gt;&#39;&#39;,
        &#39;database&#39;=&amp;gt;&#39;randomphp&#39;,
        &#39;port&#39;=&amp;gt;&#39;3306&#39;
    )
);

return $config;`&lt;/pre&gt;
&amp;nbsp;
&lt;pre class=&quot;pure-highlightjs&quot;&gt;`&amp;lt;?php
if (file_exists($file_path)) {
            $config = require $file_path;
}`&lt;/pre&gt;
我们的$config就获取我们配置文件里面的数组了，是不是很简单！

下面说一下多级目录配置。

因为我实现的mvc里面有全局配置，模块配置，还有基于具体模块的配置

一开始的想法是让优先级高的配置覆盖优先级低的配置。可是一直想不到如何自动获取调用config类的当前目录路径，所有我最后的实现是使用一个二位数组存放不同path下的配置，然后程序运行到那个位置就通过设置一个成员变量path来获取对应path的配置。然后如果在优先级高的配置中找不到会继续往优先级低的配置寻找。如果在最低一层配置（全局配置）中也找不到，就返回空字符串。

大大的不妥。关于我对多级目录的配置的实现大家不要太在意～～

所以我们这篇文章主要讲了“如何像数组一样访问你的php对象”的一个小技巧（通过实现ArrayAccess接口）。

最后贴出我整个类的源代码 。（仅供参考，请勿用于生产环境。）
&lt;pre class=&quot;pure-highlightjs&quot;&gt;`&amp;lt;?php

namespace Random;

/**
 * Class Config
 * @package Random
 * @author DJM &amp;lt;op87960@gmail.com&amp;gt;
 * @todo 配置类
 * @example
 *      $config = new Config(__DIR__);
 *      var_dump($config[&#39;key&#39;]);
 */
class Config implements \ArrayAccess
{
    protected $path;
    protected $configs = array();
    static $instance;

    function __construct($path)
    {
        $this-&amp;gt;path = $path;
    }

    static function getInstance($path)
    {
        if (!isset(self::$instance)) {
            self::$instance = new self($path);
        } else {
            self::$instance-&amp;gt;path = $path;
        }

        return self::$instance;
    }

    private function getConfig($path)
    {
        $file_path = $path . &#39;/Config/Config.php&#39;;
        $config = array();
        if (file_exists($file_path)) {
            $config = require $file_path;
        }
        $this-&amp;gt;configs[$path] = $config;
    }

    function offsetGet($key)
    {
        //当前目录配置是否加载,否则先加载配置
        if (!isset($this-&amp;gt;configs[$this-&amp;gt;path])) {
            $this-&amp;gt;getConfig($this-&amp;gt;path);
        }

        //检查当前目录配置是否存在此key
        if (key_exists($key, $this-&amp;gt;configs[$this-&amp;gt;path])) {
            return $this-&amp;gt;configs[$this-&amp;gt;path][$key];
        } elseif ($this-&amp;gt;path == __DIR__) {
            //如果目录为库目录,则寻找结束,直接返回
            return $this-&amp;gt;configs[__DIR__][$key];
        }

        //module目录配置是否加载,否则先加载配置
        if (!isset($this-&amp;gt;configs[APP_ROOT])) {
            $this-&amp;gt;getConfig(APP_ROOT);
        }
        //检查module配置是否存在此key
        if (key_exists($key, $this-&amp;gt;configs[APP_ROOT])) {
            return $this-&amp;gt;configs[$this-&amp;gt;path][$key];
        }

        //全局配置是否加载,否则先加载配置
        if (!isset($this-&amp;gt;configs[__DIR__])) {
            $this-&amp;gt;getConfig(__DIR__, $key);
        }

        return isset($this-&amp;gt;configs[__DIR__][$key]) ? $this-&amp;gt;configs[__DIR__][$key] : &#39;&#39;;
    }

    function offsetSet($key, $value)
    {
//        $this-&amp;gt;configs[$this-&amp;gt;path][$key] = $value;
        throw new \Exception(&quot;cannot write config file.&quot;);
    }

    function offsetExists($key)
    {
        return isset($this-&amp;gt;configs[$key]);
    }

    function offsetUnset($key)
    {
        unset($this-&amp;gt;configs[$key]);
    }
}
</code></pre><p>&nbsp;</p>
<p>&nbsp;</p>

                
            </div>
            <div class="continue">
            <a href="/2016/04/02/e6-88-91-e7-9a-84php-mvc-e4-b9-8b-e8-b7-af-e7-b3-bb-e5-88-97-e4-ba-8c-e9-85-8d-e7-bd-ae-e5-8a-a0-e8-bd-bd-e7-b1-bb/">
            继续阅读            <i class="fa fa-angle-right" aria-hidden="true"></i>
            </a>
            </div>
        </article>
        
        <article class="post">
            <h1>
                <a class="title" href="/2016/03/26/e6-88-91-e7-9a-84php-mvc-e4-b9-8b-e8-b7-af-e7-b3-bb-e5-88-97-e4-b8-80/"> 
                    我的php mvc之路系列(一) 
                </a>
            </h1>
                        <div class="meta">
                <a class="date"> 
                    <i class="fa fa-calendar" aria-hidden="true"></i>                    
                    2016-03-26   
                </a>
                
                <a class="category">
                    <i class="fa fa-th" aria-hidden="true"></i>  
                </a>
               
                <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/mvc框架/">mvc框架</a></li></ul>
                
                    
            </div>
            <div class="content">
                
                <p>今天我想分享部分的是 <strong>路由调度。</strong></p>
<p>我们采取的url模式是index.php/module/controller/method/param1/value1.html</p>
<p>用的是/做参数分割。先上代码。</p>
<pre><code>        $param = Array();
        $uri = isset($_SERVER[&#39;PATH_INFO&#39;]) ? $_SERVER[&#39;PATH_INFO&#39;] : &#39;&#39;;   //使用path_info模式
        if (!isset($_SERVER[&#39;PATH_INFO&#39;]) &amp;amp;&amp;amp; !DEBUG) {
            throw new \Exception(&quot;系统不支持path_info&quot;);
        }`&lt;/pre&gt;
&amp;nbsp;

我们首先要关注$_SERVER[&#39;path_info&#39;]这全局变量。你可以把这个把这个变量理解为脚本路径之后的字符串。举一个栗子。
&gt; http://localhost/RandomPHP/Web/Home/Home/index/id/2/name/jack.html
因为我的服务器开启了apache改写规则，我们其实是省略了index.php脚本文件。

$_SERVER[path_info] = &quot;/Home/Home/index/id/2/name/jack.html&quot;;

贴一下apache改写的代码
&lt;pre&gt;&amp;lt;IfModule mod_rewrite.c&amp;gt;
  Options +FollowSymlinks
  RewriteEngine On

  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteRule ^(.*)$ index.php/$1 [QSA]
&amp;lt;/IfModule&amp;gt;&lt;/pre&gt;
这里大家可以通过下面这个链接去了解一下apache改写的知识。

**QSA**(query string append) 追加请求字符串

[关于Apache mod_rewrite的中文配置、使用和语法介绍（实现URL重写和防盗链功能）](http://chinablog.blog.51cto.com/276793/280278)

获取到了path_info之后了。我们就要用‘/’这个作为分隔符，把path_info分割成4个数组。

在这之前我们要先把.html伪静态字符先去掉，然后用explode进行字符串分割，注意这里的第三个参数，这个参数控制分割之后的数组个数，然后假如需要分割的元素大于数组个数的话，最后一个数组将会存储剩下的字符串。
&lt;pre class=&quot;pure-highlightjs&quot;&gt;`//伪静态处理
        if (false !== $pos = strpos($uri, &#39;.&#39;)) {
            $config = Register::get(&#39;config&#39;);
            if (substr($uri, $pos + 1) != $config[&#39;suffix&#39;]) {
                throw new \Exception(&quot;suffix is not supported&quot;);
            } else {
                $uri = substr($uri, 0, $pos);
            }
        }

        //参数分解
        $request = explode(&#39;/&#39;, trim($uri, &#39;/&#39;), 4);`&lt;/pre&gt;
然后判断数组的元素个数，如果小于3的话，说明参数没有传够，我们这里统一把它定位到/homr/home/index。作为我们框架的默认页面。

个数大于3的话，那说明还传进了参数。我们需要再次切割这些 参数，把他们解析成key＝value的关联数组和$_GET合并。
&lt;pre class=&quot;pure-highlightjs&quot;&gt;`//不规范的url,统一定位到Home/Home/index
        if (count($request) &amp;lt; 3) {
            return array(&#39;Home&#39;, &#39;Home&#39;, &#39;index&#39;);
        } elseif (count($request) &amp;gt; 3) {
            //get Param
            preg_replace_callback(&#39;/([^\/]+)\/([^\/]+)/&#39;, function ($match) use (&amp;amp;$param) {
                $param[strtolower($match[1])] = strip_tags($match[2]);
            }, array_pop($request));

            //把param加入到$_GET
            $_GET = array_merge($param, $_GET);
        }`&lt;/pre&gt;
这里的preg_replace_callback($pattern,$function,$string); 第一个是正则表达式，第二个参数函数名或者匿名函数，在函数里面实现replace的操作，第三个参数是要操作的字符串。

array_pop弹出数组的最后一个元素($request[3]＝‘id/2/name/jack’)作为操作的字符串。每一次匹配一组（xx）/（xx）,然后把匹配数组$match传入回调函数。

这个$match的内容是

$match = array(

[0]=&amp;gt;&#39;id/2&#39;，  //整个字符串

[1]=&amp;gt;&#39;id&#39;，

[2]=&amp;gt;&#39;2&#39;

);

然后在回调函数里面我们构造$var[&#39;$match[1]&#39;] = $match[2];

这样我们就得到了我们要的$var[&#39;id&#39;] = 2;

最后用array_merge讲$var和$_GET进行合并。
&lt;pre class=&quot;pure-highlightjs&quot;&gt;`//get Module
        $router[] = ucwords(array_shift($request));

        //get Controller
        $router[] = ucwords(array_shift($request));

        //get Method
        $router[] = array_shift($request);`&lt;/pre&gt;
&amp;nbsp;

最后把$request里面的module和controller都进行首字母大写处理。加入到router数组。返回。

最后贴出完整代码。
&lt;pre class=&quot;pure-highlightjs&quot;&gt;`&amp;lt;?php
/**
 * Created by PhpStorm.
 * User: dengjiaming
 * Date: 23/3/2016
 * Time: 下午3:47
 */

namespace Random;

class Router
{
    /**
     * @author DJM &amp;lt;op87960@gmail.com&amp;gt;
     * @todo url解析
     */
    static function parseUrl()
    {
        //        $uri = $_SERVER[&#39;SCRIPT_NAME&#39;];
        $param = Array();
        $uri = isset($_SERVER[&#39;PATH_INFO&#39;]) ? $_SERVER[&#39;PATH_INFO&#39;] : &#39;&#39;;   //使用path_info模式
        if (!isset($_SERVER[&#39;PATH_INFO&#39;]) &amp;amp;&amp;amp; !DEBUG) {
            throw new \Exception(&quot;系统不支持path_info&quot;);
        }

        //伪静态处理
        if (false !== $pos = strpos($uri, &#39;.&#39;)) {
            $config = Register::get(&#39;config&#39;);
            if (substr($uri, $pos + 1) != $config[&#39;suffix&#39;]) {
                throw new \Exception(&quot;suffix is not supported&quot;);
            } else {
                $uri = substr($uri, 0, $pos);
            }
        }

        //参数分解
        $request = explode(&#39;/&#39;, trim($uri, &#39;/&#39;), 4);

        //不规范的url,统一定位到Home/Home/index
        if (count($request) &amp;lt; 3) {
            return array(&#39;Home&#39;, &#39;Home&#39;, &#39;index&#39;);
        } elseif (count($request) &amp;gt; 3) {
            //get Param
            preg_replace_callback(&#39;/([^\/]+)\/([^\/]+)/&#39;, function ($match) use (&amp;amp;$param) {
                $param[strtolower($match[1])] = strip_tags($match[2]);
            }, array_pop($request));

            //把param加入到$_GET
            $_GET = array_merge($param, $_GET);
        }

        //get Module
        $router[] = ucwords(array_shift($request));

        //get Controller
        $router[] = ucwords(array_shift($request));

        //get Method
        $router[] = array_shift($request);

        return $router;
    }
}
</code></pre><p>&nbsp;</p>

                
            </div>
            <div class="continue">
            <a href="/2016/03/26/e6-88-91-e7-9a-84php-mvc-e4-b9-8b-e8-b7-af-e7-b3-bb-e5-88-97-e4-b8-80/">
            继续阅读            <i class="fa fa-angle-right" aria-hidden="true"></i>
            </a>
            </div>
        </article>
        
        <article class="post">
            <h1>
                <a class="title" href="/2016/03/19/memcached-e5-af-b9key-e5-92-8cvalue-e7-9a-84-e9-99-90-e5-88-b6/"> 
                    Memcached对key和value的限制 
                </a>
            </h1>
                        <div class="meta">
                <a class="date"> 
                    <i class="fa fa-calendar" aria-hidden="true"></i>                    
                    2016-03-19   
                </a>
                
                <a class="category">
                    <i class="fa fa-th" aria-hidden="true"></i>  
                </a>
               
                <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/杂记/">杂记</a></li></ul>
                
                    
            </div>
            <div class="content">
                
                <p>Memcached默认的key是255字符。默认的item是(1024*1024)=1m</p>
<p>若要突破限制。则可以通过修改memcached.h里面的源码来实现。</p>
<p>#define KEY_MAX_LENGTH 255</p>
<p>#define MAX_ITEM_SIZE 1024*1024</p>
<p>还可以在启动时增加-I参数。指定max_item_size。</p>

                
            </div>
            <div class="continue">
            <a href="/2016/03/19/memcached-e5-af-b9key-e5-92-8cvalue-e7-9a-84-e9-99-90-e5-88-b6/">
            继续阅读            <i class="fa fa-angle-right" aria-hidden="true"></i>
            </a>
            </div>
        </article>
        
        <article class="post">
            <h1>
                <a class="title" href="/2016/03/17/myisam-vs-innodb/"> 
                    MyISAM VS InnoDB 
                </a>
            </h1>
                        <div class="meta">
                <a class="date"> 
                    <i class="fa fa-calendar" aria-hidden="true"></i>                    
                    2016-03-17   
                </a>
                
                <a class="category">
                    <i class="fa fa-th" aria-hidden="true"></i>  
                </a>
               
                <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/mysql/">mysql</a></li></ul>
                
                    
            </div>
            <div class="content">
                
                <div><br><br>使用MySQL当然会接触到MySQL的存储引擎，在新建数据库和新建数据表的时候都会看到。<br><br>MySQL默认的存储引擎是MyISAM，其他常用的就是InnoDB了。<br><br>至于到底用哪种存储引擎比较好？这个问题是没有定论的，需要根据你的需求和环境来衡量。所以对这两种引擎的概念、原理、异同和各自的优劣点有了详细的了解之后，再根据自己的情况选择起来就容易多了。<br><table width="100%"><br><thead><br><tr><br><th></th><br><th>MyISAM</th><br><th>InnoDB</th><br></tr><br></thead><br><tbody><br><tr><br><td>存储结构</td><br><td>每张表被存放在三个文件：<br><br>1.  frm-表格定义<br>2.  MYD(MYData)-数据文件<br>3.  MYI(MYIndex)-索引文件<br></td><br><td>所有的表都保存在同一个数据文件中（也可能是多个文件，或者是独立的表空间文件），InnoDB表的大小只受限于操作系统文件的大小，一般为2GB</td><br></tr><br><tr><br><td>存储空间</td><br><td>MyISAM可被压缩，存储空间较小</td><br><td>InnoDB的表需要更多的内存和存储，它会在主内存中建立其专用的缓冲池用于高速缓冲数据和索引</td><br></tr><br><tr><br><td>可移植性、备份及恢复</td><br><td>由于MyISAM的数据是以文件的形式存储，所以在跨平台的数据转移中会很方便。在备份和恢复时可单独针对某个表进行操作</td><br><td>免费的方案可以是拷贝数据文件、备份 binlog，或者用 mysqldump，在数据量达到几十G的时候就相对痛苦了</td><br></tr><br><tr><br><td>事务安全</td><br><td>不支持 每次查询具有原子性</td><br><td>支持 具有事务(commit)、回滚(rollback)和崩溃修复能力(crash recovery capabilities)的事务安全(transaction-safe (ACID compliant))型表</td><br></tr><br><tr><br><td>AUTO_INCREMENT</td><br><td>MyISAM表可以和其他字段一起建立联合索引</td><br><td>InnoDB中必须包含只有该字段的索引</td><br></tr><br><tr><br><td>SELECT</td><br><td>MyISAM更优</td><br><td></td><br></tr><br><tr><br><td>INSERT</td><br><td></td><br><td>InnoDB更优</td><br></tr><br><tr><br><td>UPDATE</td><br><td></td><br><td>InnoDB更优</td><br></tr><br><tr><br><td>DELETE</td><br><td></td><br><td>InnoDB更优 它不会重新建立表，而是一行一行的删除</td><br></tr><br><tr><br><td>COUNT without WHERE</td><br><td>MyISAM更优。因为MyISAM保存了表的具体行数</td><br><td>InnoDB没有保存表的具体行数，需要逐行扫描统计，就很慢了</td><br></tr><br><tr><br><td>COUNT with WHERE</td><br><td>一样</td><br><td>一样，InnoDB也会锁表</td><br></tr><br><tr><br><td>锁</td><br><td>只支持表锁</td><br><td>支持表锁、行锁 行锁大幅度提高了多用户并发操作的新能。但是InnoDB的行锁，只是在WHERE的主键是有效的，非主键的WHERE都会锁全表的</td><br></tr><br><tr><br><td>外键</td><br><td>不支持</td><br><td>支持</td><br></tr><br><tr><br><td>FULLTEXT全文索引</td><br><td>支持</td><br><td>不支持 可以通过使用Sphinx从InnoDB中获得全文索引，会慢一点</td><br></tr><br></tbody><br></table><br>总的来说，MyISAM和InnoDB各有优劣，各有各的使用环境。<br><br>但是InnoDB的设计目标是处理大容量数据库系统，它的CPU利用率是其它基于磁盘的关系数据库引擎所不能比的。<br><br></div><br><div></div><br><div><br><div><br><div>我觉得使用InnoDB可以应对更为复杂的情况，特别是对并发的处理要比MyISAM高效。同时结合memcache也可以缓存SELECT来减少SELECT查询，从而提高整体性能。</div><br></div><br></div>
                
            </div>
            <div class="continue">
            <a href="/2016/03/17/myisam-vs-innodb/">
            继续阅读            <i class="fa fa-angle-right" aria-hidden="true"></i>
            </a>
            </div>
        </article>
        
        <article class="post">
            <h1>
                <a class="title" href="/2016/03/17/mysql-e4-b8-8d-e4-bd-bf-e7-94-a8-e7-b4-a2-e5-bc-95-e7-9a-84-e6-83-85-e5-86-b5/"> 
                    mysql 不使用索引的情况 
                </a>
            </h1>
                        <div class="meta">
                <a class="date"> 
                    <i class="fa fa-calendar" aria-hidden="true"></i>                    
                    2016-03-17   
                </a>
                
                <a class="category">
                    <i class="fa fa-th" aria-hidden="true"></i>  
                </a>
               
                <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/mysql/">mysql</a></li></ul>
                
                    
            </div>
            <div class="content">
                
                <div><br><br>众所周知，增加索引是提高查询速度的有效途径，但是很多时候，即使增加了索引，查询仍然不使用索引，这种情况严重影响性能，这里就简单总结几条MySQL不使用索引的情况<br><br>1.  如果MySQL估计使用索引比全表扫描更慢，则不使用索引。例如，如果列key均匀分布在1和100之间，下面的查询使用索引就不是很好：select <em> from table_name where key&gt;1 and key&lt;90;<br>2.  用or分隔开的条件，如果or前的条件中的列有索引，而后面的列没有索引，那么涉及到的索引都不会被用到，例如：select </em> from table_name where key1=’a’ or key2=’b’;如果在key1上有索引而在key2上没有索引，则该查询也不会走索引<br>3.  复合索引，如果索引列不是复合索引的第一部分，则不使用索引（即不符合最左前缀），例如，复合索引为(key1,key2),则查询select <em> from table_name where key2=’b’;将不会使用索引<br>4.  如果like是以‘%’开始的，则该列上的索引不会被使用。例如select </em> from table_name where key1 like ‘%a’；该查询即使key1上存在索引，也不会被使用<br>5.  如果列为字符串，则where条件中必须将字符常量值加引号，否则即使该列上存在索引，也不会被使用。例如,select * from table_name where key1=1;如果key1列保存的是字符串，即使key1上有索引，也不会被使用。<br></div><br><div></div><br><div><br><div><br><div>从上面可以看出，即使我们建立了索引，也不一定会被使用，那么我们如何知道我们索引的使用情况呢？？在MySQL中，有Handler_read_key和Handler_read_rnd_key两个变量，如果Handler_read_key值很高而Handler_read_rnd_key的值很低，则表明索引经常不被使用，应该重新考虑建立索引。可以通过:show status like ‘Handler_read%’来查看着连个参数的值。</div><br></div><br></div>
                
            </div>
            <div class="continue">
            <a href="/2016/03/17/mysql-e4-b8-8d-e4-bd-bf-e7-94-a8-e7-b4-a2-e5-bc-95-e7-9a-84-e6-83-85-e5-86-b5/">
            继续阅读            <i class="fa fa-angle-right" aria-hidden="true"></i>
            </a>
            </div>
        </article>
        
        <article class="post">
            <h1>
                <a class="title" href="/2016/03/16/cetv-ef-bc-88-e8-a7-86-e6-ba-90-ef-bc-89-e7-ac-94-e8-af-95-ef-bc-8b-e9-9d-a2-e8-af-95/"> 
                    cetv（视源） 笔试＋面试 
                </a>
            </h1>
                        <div class="meta">
                <a class="date"> 
                    <i class="fa fa-calendar" aria-hidden="true"></i>                    
                    2016-03-16   
                </a>
                
                <a class="category">
                    <i class="fa fa-th" aria-hidden="true"></i>  
                </a>
               
                <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/3月实习面试之路/">3月实习面试之路</a></li></ul>
                
                    
            </div>
            <div class="content">
                
                <p>首先讲讲笔试。本来是错过了最后一场的在线笔试时间。然后它们竟然发短信过来提示可以再有一次机会。真是煞费苦心啊。</p>
<p>笔试有几个比较深刻。</p>
<p>选择题</p>
<p>排他锁 （悲观锁） ：加了排他锁不能再加共享锁，只允许加了锁的事务进行读写操作。</p>
<p>广义表：这个我还没搞懂。</p>
<p>快排：竟然忘了具体的排序过程。每次选一个曲轴，左右两个指针，右边指针先走，直到遇到比曲轴小的数停下来，左边指针则是遇到比曲轴大的数，然后交换两个指针的值，右边指针继续先走，直到左右指针相遇，算完成一次快排。然后分开区间递归。</p>
<p>面试：</p>
<p>笔试第二天就提醒过了，然后就屁颠屁颠的去了cvte。</p>
<p>Q：先写一个输出从1到1000的素数的程序。</p>
<p>A：我用了5分钟，憋出了一个O（n²）的算法。。</p>
<p>求1-n的素数的算法</p>
<p>1、两层for。内层用i&lt;√n结束。O(n*log(n))</p>
<pre><code>#include &amp;lt;iostream&amp;gt;
using namespace std;

bool isPrime(int nr)
{
    for (int d = 2; (d * d) &amp;lt; (nr + 1); ++d){
        if (!(nr % d)){
            return false;
        }
     }
    return true;
}

int main (int argc, char * const argv[])
{
    for (int i = 0; i &amp;lt; 50; ++i){
        if (isPrime(i)){
            cout &amp;lt;&amp;lt; i &amp;lt;&amp;lt; endl;
        }
    }
}
`&lt;/pre&gt;
2、排除法_O__(n(log(logn)))_

一、初始化如下列表。
&lt;pre&gt; 2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30&lt;/pre&gt;
二、把第一个数（2）取出来，去掉所有可以被2整除的数。
&lt;pre&gt; 2  3     5     7     9    11    13    15    17    19    21    23    25    27    29&lt;/pre&gt;
三、取第二个数（3），去掉所有可以被 3整除的数。
&lt;pre&gt; 2  3     5     7          11    13          17    19          23    25          29&lt;/pre&gt;
四、取第三个数（5），因为4已经被去除了，再去掉所有可以被5整除的数。
&lt;pre&gt; 2  3     5     7          11    13          17    19          23                29&lt;/pre&gt;
接下来的数是7，但是7的平方是49，其大于了30，所以我们可以停止计算了。剩下的数就是所有的质数了。

3、一个数不能被比它小的素数整除则是素数。复杂度不会算。
&lt;pre class=&quot;pure-highlightjs&quot;&gt;`#include &amp;lt;stdio.h&amp;gt;
#define NPRIMES  1000
#define FALSE 0
#define TRUE  1
int main(void) {
    int n;
    int i,j;
    int flag;
    int primes[NPRIMES];  // 保存比 n 小的素数
    int level;  // 当前素数的数目加1
    printf(&quot;Enter value of N &amp;gt; &quot;);
    scanf(&quot;%d&quot;,&amp;amp;n);
    level = 0;
    for(i=2;i&amp;lt;=n;i++) {
        for(j = 0, flag = TRUE; j&amp;lt;level &amp;amp;&amp;amp; flag; j++)
            flag = (i%primes[j]);
        if (flag) {  // i 是一个素数
            printf(&quot;%12d\n&quot;, i);
            if (level &amp;lt; NPRIMES)
            primes[level++] = i;
        }
    }
}
</code></pre><p>Q：看你有学过http的编程，请问http报文的<strong>header</strong>是？</p>
<p>PS：空耳听成http报文结构。然后又扯了一大段。。。</p>
<p>A：Version:版本<br>Header length:头部长度<br>Differentiated services field:QoS<br>Total length:总长<br>Identification:ip分片（标志符）区分不同进程<br>Flags:标识符（控制是否分片）<br>Fragment offset:分片偏移<br>Time to live (ttl):生存时间，范围0-255。每经过一个理由减1。若TTL=0时。数据被丢弃。通过TTL可以防止数据环路（TTL的重点）。<br>Header checksums:头部校验和<br>Source&amp;Destination:源目IP</p>
<p>Header头常用content－type ：application/json、text/plain、text/xml</p>
<p>Q：mysql的两个引擎innode与myIsam的区别。（记得一点点。。）</p>
<p>Q：mysql用的是btree＋，索引存在哪里。</p>
<p>PS：<a href="http://blog.codinglabs.org/articles/theory-of-mysql-index.html" target="_blank" rel="noopener">http://blog.codinglabs.org/articles/theory-of-mysql-index.html</a></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>

                
            </div>
            <div class="continue">
            <a href="/2016/03/16/cetv-ef-bc-88-e8-a7-86-e6-ba-90-ef-bc-89-e7-ac-94-e8-af-95-ef-bc-8b-e9-9d-a2-e8-af-95/">
            继续阅读            <i class="fa fa-angle-right" aria-hidden="true"></i>
            </a>
            </div>
        </article>
        
        <article class="post">
            <h1>
                <a class="title" href="/2016/03/16/4399-php-e5-ae-9e-e4-b9-a0-e7-94-9f/"> 
                    4399 php实习生 
                </a>
            </h1>
                        <div class="meta">
                <a class="date"> 
                    <i class="fa fa-calendar" aria-hidden="true"></i>                    
                    2016-03-16   
                </a>
                
                <a class="category">
                    <i class="fa fa-th" aria-hidden="true"></i>  
                </a>
               
                <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/3月实习面试之路/">3月实习面试之路</a></li></ul>
                
                    
            </div>
            <div class="content">
                
                <p>网申之后，面试安排在华工的B7－4楼。</p>
<p>坐下之后做了一个简单的自我介绍：“我是来自广工的一名大三的实习生，平时喜欢逛国内各种技术论坛和研究开源技术，今天过来打算找一个好的实习。”</p>
<p>然后面试官问到了以下的问题。</p>
<p>Q：http的报文是怎么<strong>传播</strong>的（并不是问报文结构）。假如从浏览器输入一个<strong>网址</strong>开始。</p>
<p>PS：我猜他应该想问的是用了什么协议之类。</p>
<p>A：首先输入网址之后就通过DNS协议进行解析，然后，（我想了想中间好像就没有什么协议了）通过http协议和服务器端建立tcp连接，三次握手，然后发http包，http1.1可以保持长连接，建立一次连接，可以不断发送http数据包。</p>
<p>Q：SMARTY引擎有没有使用过，模版引擎的好处是？</p>
<p>A：没有用过SMARTY，模版引擎的作用是可以模版继承？？（想想都觉得自己没答到点了。然后跟面试官吹了一大段例子）。</p>
<p>PS：这边的正答应该是（直接截取SMARTY官网的描述）</p>
<blockquote>
<ul>
<li>1、干净地分离显示逻辑和程序代码<br>2、PHP后端，Smarty模板前端</li>
</ul>
<p>3、增强PHP, 而不是取代它</p>
<p>4、程序员和设计师的快速开发/部署</p>
<p>5、快速和简单的维护</p>
<p>6、语法简单易懂，无须懂PHP</p>
<p>7、灵活的自定义开发</p>
<p>8、安全: 隔离于PHP<br>Q：session存放在哪里？</p>
</blockquote>
<p>A：一般在文件，还可以在php.ini指定其它存放的方式。例如数据库或者memcached（坑了自己，鉴于memcached用的是LRU算法来对每一个slab来回收，就是说大小相近的在同一个slab的数据会被回收，用户会莫名其妙的掉线）。</p>
<p>Q：单例模式是什么？有什么好处？</p>
<p>A：设置一个全局的静态类。例如数据库类。在程序运行过程中保持单一的一个数据库类。好处是节约系统资源。</p>
<p>最后面试官问我还有什么问题要问他。</p>
<p>我问</p>
<p>Q：为什么这次就招php的实习生？（弱智的问题）</p>
<p>A：处于公司的战略。（敷衍）</p>
<p>Q：4399在广州吗？（废话！！）</p>
<p>A：是的</p>
<p>Q：4399现在用的是什么框架？</p>
<p>A：用的是公司自己开发的框架，和SMARTY引擎。</p>
                
            </div>
            <div class="continue">
            <a href="/2016/03/16/4399-php-e5-ae-9e-e4-b9-a0-e7-94-9f/">
            继续阅读            <i class="fa fa-angle-right" aria-hidden="true"></i>
            </a>
            </div>
        </article>
        
        <article class="post">
            <h1>
                <a class="title" href="/2016/03/13/psr7-http-e6-b6-88-e6-81-af-e6-8e-a5-e5-8f-a3/"> 
                    PSR7 HTTP消息接口 
                </a>
            </h1>
                        <div class="meta">
                <a class="date"> 
                    <i class="fa fa-calendar" aria-hidden="true"></i>                    
                    2016-03-13   
                </a>
                
                <a class="category">
                    <i class="fa fa-th" aria-hidden="true"></i>  
                </a>
               
                <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/php/">php</a></li></ul>
                
                    
            </div>
            <div class="content">
                
                <p>留空。。。</p>

                
            </div>
            <div class="continue">
            <a href="/2016/03/13/psr7-http-e6-b6-88-e6-81-af-e6-8e-a5-e5-8f-a3/">
            继续阅读            <i class="fa fa-angle-right" aria-hidden="true"></i>
            </a>
            </div>
        </article>
        
        <article class="post">
            <h1>
                <a class="title" href="/2016/03/13/psr6-e7-bc-93-e5-ad-98-e6-8e-a5-e5-8f-a3/"> 
                    PSR6 缓存接口 
                </a>
            </h1>
                        <div class="meta">
                <a class="date"> 
                    <i class="fa fa-calendar" aria-hidden="true"></i>                    
                    2016-03-13   
                </a>
                
                <a class="category">
                    <i class="fa fa-th" aria-hidden="true"></i>  
                </a>
               
                <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/php/">php</a></li></ul>
                
                    
            </div>
            <div class="content">
                
                <p>还是先留空，等以后有深刻了解了再回来写。</p>

                
            </div>
            <div class="continue">
            <a href="/2016/03/13/psr6-e7-bc-93-e5-ad-98-e6-8e-a5-e5-8f-a3/">
            继续阅读            <i class="fa fa-angle-right" aria-hidden="true"></i>
            </a>
            </div>
        </article>
        
</section>

  <nav class="page-nav">
    <a class="extend prev" rel="prev" href="/page/2/">&laquo; 上一页</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/4/">下一页 &raquo;</a>
  </nav>

    </main>
    <a class="not-found">not found!</a>
    <div class="search-items">
    </div>
    <a href="#header" id="top" style="display:none">
        <i class="fa fa-sort-asc fa-2x"></i>
    </a>
    <footer class="footer">
    <div class="footer-copyright">©️2017
    <a href="//github.com/Vevlins/toki" class="link" target="_blank">Toki</a>  by Vevlins
    </div>
</footer>

    <script src="/js/jquery.js"></script>
    <script src="/js/toki.js"></script>  
  <script>hljs.initHighlightingOnLoad();</script>
</body>
</html>